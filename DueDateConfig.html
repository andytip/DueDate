<!DOCTYPE html>
<html>
  <head>
    <title>Example Configuration</title>
   
  </head>
  <body>
    <p>This is an example HTML forms configuration page.</p>
 <input id='KEY_SHOWLOCATION_checkbox' type='checkbox'>
  Hide Location
</input>
<input id='KEY_DUEDATE_TEXT' type="text">
  Due Date
</input>
<input id='submit_button' type='button' value='Save'>
 <script>
  // Get a handle to the button's HTML element
  var submitButton = document.getElementById('submit_button');

  // Add a 'click' listener
  submitButton.addEventListener('click', function() {
    // Get the config data from the UI elements
    var showlocation = document.getElementById('KEY_SHOWLOCATION_checkbox');
    var duedatevalue = document.getElementById('KEY_DUEDATE_TEXT');
    var duedate = Date.parse(duedatevalue.value).getTime()/1000;
    alert(duedate);
    // Make a data object to be sent, coercing value types to integers
    var options = {
      //'background_color': parseInt(backgroundColor.value, 16),
      'KEY_SHOWLOCATION': showlocation.checked,
      'KEY_DUEDATE' : duedate
    };

    // Save for next launch
    localStorage['KEY_SHOWLOCATION'] = options['KEY_SHOWLOCATION'];
    //localStorage['high_contrast'] = options['high_contrast'];

    // Determine the correct return URL (emulator vs real watch)
    function getQueryParam(variable, defaultValue) {
      var query = location.search.substring(1);
      var vars = query.split('&');
      for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (pair[0] === variable) {
          return decodeURIComponent(pair[1]);
        }
      }
      return defaultValue || false;
    }
    var return_to = getQueryParam('return_to', 'pebblejs://close#');
    //alert("Showlocation" + showlocation.checked);
    //alert(JSON.stringify(options));

    // Encode and send the data when the page closes
    document.location = return_to + encodeURIComponent(JSON.stringify(options));
  });
  
  (function() {
    var showlocations = document.getElementById('KEY_SHOWLOCATION_checkbox');
   
    // Load any previously saved configuration, if available
    if(localStorage['KEY_SHOWLOCATION']) {
      showlocations.checked = JSON.parse(localStorage['KEY_SHOWLOCATION']);
      //backgroundColorPicker.value = localStorage['background_color'];
    }
  })();
</script>

  </body>
</html
